<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <title>Strip HO</title>
    
    <link rel="apple-touch-icon" sizes="57x57" href="ico/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="ico/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="ico/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="ico/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="ico/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="ico/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="ico/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="ico/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="ico/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="ico/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="ico/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="ico/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="ico/favicon-16x16.png">
    <!-- <link rel="manifest" href="ico/manifest.json"> -->
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="ico/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="custom.css">

</head>

<body>
	<div class="container">

        <div class="logo" id="logo"><b class="off"><span id="c1">Co</span><span id="c2">nec</span><span id="c3">ta</span><span id="c4">n</span><span id="c5">do...</span></b></div>

        <div class="buttons-box">
            <a class="btn-action btn-meeting" onclick="submitStats(1)">Em Reunião</a>
            <a class="btn-action btn-busy" onclick="submitStats(2)">Ocupado</a>
            <a class="btn-action btn-available" onclick="submitStats(3)">Disponível</a>
            <a class="btn-action btn-off" onclick="submitStats(0)">Desligar</a>
        </div>
        
	</div>

	<!-- jQuery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

	<!-- Bootstrap JS -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

	<script src="https://www.gstatic.com/firebasejs/4.7.0/firebase.js"></script>

	<script>
        $.urlParam = function(name){
            var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
            return results[1] || 0;
        }

        var u = $.urlParam('u');
        var p = $.urlParam('p');

		var config = {
			apiKey: "AIzaSyDVE-ksWr7Qxh18EaAuyMSeslo6SO8iBwk",
            authDomain: "home-office-strip.firebaseapp.com",
            databaseURL: "https://home-office-strip.firebaseio.com",
            projectId: "home-office-strip",
            storageBucket: "home-office-strip.appspot.com",
            messagingSenderId: "252635280677",
            appId: "1:252635280677:web:ff4f4d9b990ae838bad6cc"
		};
		
		//initialize your firebase
        firebase.initializeApp(config);
        
        var email = u+"@gmail.com";
        var password = p;

        firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
            // Handle Errors here.
            var errorCode = error.code;
            var errorMessage = error.message;
            // ...
        });

		var database = firebase.database();
		
		//create a variable to hold our orders list from firebase
		var firebaseStats = database.ref();
        // console.log(firebaseStats);

        function submitStats(a) {

            var firebaseStats = database.ref().set({
                stats: a
            });

        };
		
		firebaseStats.on('value',function(stats){
			var stats = stats.val();
            var color = "#444444";
            stats = stats.stats;
            // console.log(stats);
            var statsNameClass, statsName;
            switch(stats){
                case 0:
                    color = "#444444";
                    statsNameClass = "off";
                    statsName = "Desligado";
                    break;

                case 1:
                    color = "#f00";
                    statsNameClass = "meeting";
                    statsName = "Em Reunião";
                    break;

                case 2:
                    color = "#ffe500";
                    statsNameClass = "busy";
                    statsName = "Ocupado";
                    break;

                case 3:
                    color = "#1100ff";
                    statsNameClass = "available";
                    statsName = "Disponível";
                    break;

                default:
            }
			// $('#actualStats').html(statsHtml);
            // updateNeon(statsName);
            $('.buttons-box a.btn-action').removeClass('active');
            if(stats>0){
                $('.buttons-box a.btn-'+statsNameClass).addClass('active');
            }
            $('#logo b').removeClass().addClass(statsNameClass);
            updateNeon(statsName);
        });

        function updateNeon(text){
            text = text.replace(/\s/g, '');
            var textSize = text.length;
            var caracterRange = textSize/5;
            var actualPoint = 0, eachPart = caracterRange;
            for(var i = 0 ; i < 5 ; i++){
                var part = text.substring(actualPoint, eachPart);
                // console.log(caracterRange);
                // console.log(part);
                actualPoint = eachPart;
                eachPart += caracterRange;
                $('#c'+(i+1)).html(part);
            }
        }
	</script>

</body>

</html>